<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siemens Energy Ikon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* A korábbi stílusok változatlanok, nem ismétlem */
    </style>
</head>
<body onload="toggleFullscreen(); hideAllTabs();">
    <div class="container" id="container">
        <div class="header">
            <div class="header-left">
                <img src="siemens-energy-logo.png" alt="Siemens Energy Logo">
            </div>
            <div class="header-right">
                <span id="userEmail"></span>
                <i class="fas fa-envelope" title="Üzenetek" onclick="openTab('chat-lista')"></i>
                <i class="fas fa-user" title="Profiladatok" onclick="toggleProfile()"></i>
                <i class="fas fa-question-circle" title="Segítség" onclick="openTab('felhasználó-kezelés')"></i>
                <span>v1.0.1</span> <!-- Verziószám növelve -->
                <i class="fas fa-expand fullscreen-icon" onclick="toggleFullscreen()" title="Teljes képernyő"></i>
            </div>
        </div>
        <div class="divider"></div>
        <div class="tabs">
            <!-- A lapfülek változatlanok -->
        </div>
        <div id="logisztikai-adatbazis" class="tab-content">
            <!-- A táblázat változatlan -->
        </div>
        <!-- További tabok változatlanok -->
        <div id="profil" class="tab-content" style="display: none;">
            <h2>Saját profil</h2>
            <p>Email: <span id="profilEmail"></span></p>
            <p>Utolsó belépés: 2025.03.21</p>
            <button class="logout-btn" onclick="logout()">Kijelentkezés</button>
        </div>
    </div>

    <!-- Modal ablak a belépéshez -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="login-form">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="password">Jelszó:</label>
                <input type="password" id="password" name="password" required>
                <button onclick="checkLogin()">Belépés</button>
                <div id="result"></div>
            </div>
        </div>
    </div>

    <!-- Modal ablakok új rekordhoz és szerkesztéshez változatlanok -->

    <script>
        // Összes tab tartalom elrejtése
        function hideAllTabs() {
            const tabContents = document.getElementsByClassName("tab-content");
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove("active");
            }
        }

        // Email betöltése localStorage-ból
        const savedEmail = localStorage.getItem("email");
        if (savedEmail) {
            document.getElementById("email").value = savedEmail;
            document.getElementById("userEmail").textContent = savedEmail;
            document.getElementById("profilEmail").textContent = savedEmail;
            document.getElementById("loginModal").style.display = "none";
            openTab('logisztikai-adatbazis');
        } else {
            hideAllTabs();
        }

        // Belépés ellenőrzése
        function checkLogin() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const resultDiv = document.getElementById("result");

            localStorage.setItem("email", email);

            if (password === "3211") {
                resultDiv.textContent = "kész";
                resultDiv.style.color = "#4CAF50";
                document.getElementById("loginModal").style.display = "none";
                document.getElementById("userEmail").textContent = email;
                document.getElementById("profilEmail").textContent = email;
                openTab('logisztikai-adatbazis');
                initializeFilters('logisztikai-table');
                initializeFilters('nyomonkovetesi-table');
            } else {
                resultDiv.textContent = "Helytelen jelszó!";
                resultDiv.style.color = "#F44336";
            }
        }

        // Kijelentkezés
        function logout() {
            localStorage.removeItem("email");
            hideAllTabs();
            location.reload();
        }

        // Teljes képernyős mód váltása
        function toggleFullscreen() {
            const fullscreenIcon = document.querySelector(".fullscreen-icon");
            const container = document.getElementById("container");

            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                fullscreenIcon.classList.remove("fa-expand");
                fullscreenIcon.classList.add("fa-compress");
                fullscreenIcon.title = "Kilépés a teljes képernyőből";
                container.style.height = "100vh";
            } else {
                document.exitFullscreen();
                fullscreenIcon.classList.remove("fa-compress");
                fullscreenIcon.classList.add("fa-expand");
                fullscreenIcon.title = "Teljes képernyő";
                const windowHeight = window.innerHeight;
                container.style.height = `${windowHeight}px`;
            }
        }

        // Lapfülek kezelése
        function openTab(tabName) {
            if (!localStorage.getItem("email")) return;

            const tabs = document.getElementsByClassName("tab");
            const tabContents = document.getElementsByClassName("tab-content");

            for (let i = 0; i < tabs.length; i++) tabs[i].classList.remove("active");
            for (let i = 0; i < tabContents.length; i++) tabContents[i].classList.remove("active");

            document.getElementById(tabName).classList.add("active");
            const tabElement = document.querySelector(`.tab[onclick="openTab('${tabName}')"]`);
            if (tabElement) tabElement.classList.add("active");

            if (tabName !== 'profil') document.getElementById("profil").style.display = "none";
        }

        // Profil toggle
        function toggleProfile() {
            if (!localStorage.getItem("email")) return;

            const profilTab = document.getElementById("profil");
            if (profilTab.style.display === "block") {
                profilTab.style.display = "none";
                openTab('logisztikai-adatbazis');
            } else {
                openTab('profil');
                profilTab.style.display = "block";
            }
        }

        // Szűrőlista inicializálása és egyéb függvények változatlanok
    </script>
</body>
</html>
